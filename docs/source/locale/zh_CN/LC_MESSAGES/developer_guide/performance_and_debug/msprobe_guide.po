# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2025, vllm-ascend team
# This file is distributed under the same license as the vllm-ascend
# package.
# FIRST AUTHOR <EMAIL@ADDRESS>, 2025.
#
msgid ""
msgstr ""
"Project-Id-Version: vllm-ascend\n"
"Report-Msgid-Bugs-To: EMAIL@ADDRESS\n"
"POT-Creation-Date: 2025-11-21 10:19+0800\n"
"PO-Revision-Date: 2025-11-21 10:31\n"
"Last-Translator: Codex <codex@example.com>\n"
"Language-Team: Chinese (Simplified) <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"Generated-By: Babel 2.17.0\n"

#: ../../developer_guide/performance_and_performance_and_debug/msprobe_guide.md
msgid "MSProbe Debugging Guide"
msgstr "MSProbe 调试指南"

#: ../../developer_guide/performance_and_performance_and_debug/msprobe_guide.md
msgid ""
"During inference or training runs we often encounter accuracy anomalies such"
" as outputs drifting away from the expectation, unstable numerical behavior "
"(NaN/Inf), or predictions that no longer match the labels. To pinpoint the "
"root cause we have to monitor and capture intermediate data produced while "
"the model executes—feature maps, weights, activations, and layer outputs. By"
" capturing key tensors at specific stages, logging I/O pairs for the core "
"layers, and retaining contextual metadata (prompts, tensor dtypes, hardware "
"configuration, etc.), we can systematically trace where the accuracy "
"degradation or numerical error started. This guide describes the end-to-end "
"workflow for diagnosing accuracy issues for AI models (with a focus on vllm-"
"ascend services): preparation, data capture, and analysis & verification."
msgstr ""
"在推理或训练过程中，我们常会遇到精度异常问题，例如输出偏离预期、出现数值不稳定（NaN/Inf）现象，或预测结果与标签不再匹配。要定位根本原因，必须监控并捕获模型执行过程中产生的中间数据——包括特征图、权重、激活值和各层输出。通过在特定阶段捕获关键张量、记录核心层的输入输出对，并保留上下文元数据（提示词、张量数据类型、硬件配置等），我们可以系统性地追踪精度退化或数值误差的源头。本指南描述了诊断 AI 模型精度问题的端到端工作流（重点针对 vllm-ascend 服务）：准备工作、数据采集以及分析与验证。"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "0. Background Concepts"
msgstr "0. 背景概念"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "`msprobe` supports three accuracy levels:"
msgstr "`msprobe` 支持三种精度级别："

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"**L0**: dumps tensors at the module level and generates `construct.json` so "
"that visualization tools can rebuild the network structure. A model or "
"submodule handle must be passed in."
msgstr "**L0**：在模块级别保存张量，并生成 `construct.json` 以便可视化工具重建网络结构。需要传入模型或子模块句柄。"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"**L1**: collects operator-level statistics only, which is suitable for "
"lightweight troubleshooting."
msgstr "**L1**：仅采集算子级统计信息，适用于轻量级故障排查。"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"**mix**: captures both structural information and operator statistics, which"
" is useful when you need both graph reconstruction and numerical "
"comparisons."
msgstr "**mix**：同时捕获结构信息和算子统计，适用于需要同时进行图重构和数值比较的场景。"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "1. Prerequisites"
msgstr "1.前提条件"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "1.1 Install `msprobe`"
msgstr "1.1 安装 `msprobe`"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "Install msprobe with pip:"
msgstr "使用 pip 安装 msprobe："

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "1.2 Visualization dependencies (optional)"
msgstr "1.2 可视化依赖（可选）"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Install additional dependencies if you need to visualize the captured data."
msgstr "如需对采集的数据进行可视化，请安装以下依赖。"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "Install `tb_graph_ascend`:"
msgstr "安装 `tb_graph_ascend`："

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "2. Collecting Data with `msprobe`"
msgstr "2.使用 `msprobe` 采集数据"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"We generally follow a coarse-to-fine strategy when capturing data. First "
"identify the token where the issue shows up, and then decide which range "
"needs to be sampled around that token. The typical workflow is described "
"below."
msgstr "我们通常采用由粗到细的策略采集数据。首先确定问题出现的 token，然后决定围绕该 token 需要采样的范围。典型工作流程如下所述。"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "2.1 Prepare the dump configuration file"
msgstr "2.1 准备数据采集配置文件"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Create a `config.json` that can be parsed by `PrecisionDebugger` and place "
"it in an accessible path. Common fields are:"
msgstr "创建一个可由 `PrecisionDebugger` 解析的 `config.json` 文件，并将其置于可访问路径。常见字段如下："

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "Field"
msgstr "字段"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "Description"
msgstr "说明"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "Required"
msgstr "必填"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "`task`"
msgstr "`task`"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Type of dump task. Common PyTorch values include `\"statistics\"` and "
"`\"tensor\"`. A statistics task collects tensor statistics (mean, variance, "
"max, min, etc.) while a tensor task captures arbitrary tensors."
msgstr "采集任务类型。PyTorch 常用取值包括 `\"statistics\"` 和 `\"tensor\"`。统计任务采集张量统计信息（均值、方差、最大值、最小值等），而张量任务则捕获任意张量。"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "Yes"
msgstr "是"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "`dump_path`"
msgstr "`dump_path`"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Directory where dump results are stored. When omitted, `msprobe` uses its "
"default path."
msgstr "采集结果存储目录。如未指定，`msprobe` 将使用其默认路径。"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "No"
msgstr "否"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid "`rank`"
msgstr "`rank`"

#: ../../developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Ranks to sample. An empty list collects every rank. For single-card tasks "
"you must set this field to `[]`."
msgstr "指定需要采样的设备 rank。空列表表示采集所有 rank。单卡任务必须将此字段设置为 `[]`。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "`step`"
msgstr "`step`"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "Token iteration(s) to sample. An empty list means every iteration."
msgstr "指定需要采样的 token 迭代次数。空列表表示所有迭代。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "`level`"
msgstr "`level`"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Dump level string (`\"L0\"`, `\"L1\"`, or `\"mix\"`). `L0` targets "
"`nn.Module`, `L1` targets `torch.api`, and `mix` collects both."
msgstr "采集级别字符串（`\"L0\"`、`\"L1\"` 或 `\"mix\"`）。`L0` 针对 `nn.Module`，`L1` 针对 `torch.api`，`mix` 则同时采集两者。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "`async_dump`"
msgstr "`async_dump`"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Whether to enable asynchronous dump (supported for PyTorch "
"`statistics`/`tensor` tasks). Defaults to `false`."
msgstr "是否启用异步采集（PyTorch `statistics`/`tensor` 任务支持）。默认值为 `false`。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "`scope`"
msgstr "`scope`"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "Module range to sample. An empty list collects every module."
msgstr "指定需要采样的模块范围。空列表表示所有模块。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "`list`"
msgstr "`list`"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "Operator range to sample. An empty list collects every operator."
msgstr "指定需要采样的算子范围。空列表表示所有算子。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"To restrict the operators that are captured, configure the `list` block:"
msgstr "如需限制捕获的算子范围，可配置 `list` 块："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`scope` (list[str]): In PyTorch pynative scenarios this field restricts the "
"dump range. Provide two module or API names that follow the tool's naming "
"convention to lock a range; only data between the two names will be dumped. "
"Examples:"
msgstr "`scope`（list[str]）：在 PyTorch 动态图场景下，此字段用于限制采集范围。提供两个遵循工具命名约定的模块或 API 名称以锁定范围；仅会采集这两个名称之间的数据。示例："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"The `level` setting determines what can be provided—modules when `level=L0`,"
" APIs when `level=L1`, and either modules or APIs when `level=mix`."
msgstr "`level` 设置决定了可提供的内容——`level=L0` 时使用模块名，`level=L1` 时使用 API 名，`level=mix` 时两者皆可。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "`list` (list[str]): Custom operator list. Options include:"
msgstr "`list`（list[str]）：自定义算子列表。选项包括："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Supply the full names of specific APIs in PyTorch pynative scenarios to only"
" dump those APIs. Example: `\"list\": [\"Tensor.permute.1.forward\", "
"\"Tensor.transpose.2.forward\", \"Torch.relu.3.backward\"]`."
msgstr "在 PyTorch 动态图场景中，提供特定 API 的全称以仅采集这些 API。示例：`\"list\": [\"Tensor.permute.1.forward\", \"Tensor.transpose.2.forward\", \"Torch.relu.3.backward\"]`。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"When `level=mix`, you can provide module names so that the dump expands to "
"everything produced while the module is running. Example: `\"list\": "
"[\"Module.module.language_model.encoder.layers.0.mlp.ParallelMlp.forward.0\"]`."
msgstr "当 `level=mix` 时，可提供模块名称，采集将扩展至该模块运行时产生的所有内容。示例：`\"list\": [\"Module.module.language_model.encoder.layers.0.mlp.ParallelMlp.forward.0\"]`。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Provide a substring such as `\"list\": [\"relu\"]` to dump every API whose "
"name contains the substring. When `level=mix`, modules whose names contain "
"the substring are also expanded."
msgstr "提供子字符串（例如 `\"list\": [\"relu\"]`）以采集名称包含该子字符串的所有 API。当 `level=mix` 时，名称包含该子字符串的模块也会被展开采集。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "Example configuration:"
msgstr "配置示例："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "2. Enable `msprobe` in vllm-ascend"
msgstr "2.在 vllm-ascend 中启用 `msprobe`"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Start vLLM in eager mode by adding `--enforce-eager` (static-graph scenarios"
" are not supported yet) and pass the config path through `--additional-"
"config`:"
msgstr "通过添加 `--enforce-eager` 以动态图模式启动 vLLM（暂不支持静态图场景），并通过 `--additional-config` 传递配置路径："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "3. Send requests and collect dumps"
msgstr "3.发送请求并采集数据"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "Send inference requests as usual, for example:"
msgstr "按常规方式发送推理请求，例如："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Each request drives the sequence `msprobe: start -> forward/backward -> stop"
" -> step`. The runner invokes `step()` on every code path, so you always get"
" a complete dataset even if inference returns early."
msgstr "每个请求都会驱动序列 `msprobe: start -> forward/backward -> stop -> step`。运行器在每个代码路径都会调用 `step()`，因此即使推理提前返回，您也能获得完整的数据集。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "Dump files are written into `dump_path`. They usually contain:"
msgstr "采集文件将写入 `dump_path`。通常包含以下内容："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "Tensor files grouped by operator/module."
msgstr "按算子或模块分组的张量文件。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`dump.json`, which records metadata such as dtype, shape, min/max, and "
"`requires_grad`."
msgstr "记录 dtype、形状、最小值/最大值以及 `requires_grad` 等元数据的 `dump.json`。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`construct.json`, which is generated when `level` is `L0` or `mix` (required"
" for visualization)."
msgstr "当 `level` 为 `L0` 或 `mix` 时生成的 `construct.json`（可视化必需）。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "Example directory layout:"
msgstr "目录结构示例："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
#, python-brace-format
msgid ""
"`rank`: Device ID. Each card writes its data to the corresponding `rank{ID}`"
" directory. In non-distributed scenarios the directory is simply named "
"`rank`."
msgstr "`rank`：设备 ID。每张卡将其数据写入对应的 `rank{ID}` 目录。在非分布式场景中，目录仅命名为 `rank`。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "`dump_tensor_data`: Tensor payloads that were collected."
msgstr "`dump_tensor_data`：采集到的张量数据。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`dump.json`: Statistics for the forward/backward data of each API or module,"
" including names, dtype, shape, max, min, mean, L2 norm (square root of the "
"L2 variance), and CRC-32 when `summary_mode=\"md5\"`. See [dump.json file "
"description](#dumpjson-file-description) for details."
msgstr "`dump.json`：每个 API 或模块前向/反向数据的统计信息，包括名称、dtype、形状、最大值、最小值、均值、L2 范数（L2 方差的平方根），以及在 `summary_mode=\"md5\"` 时的 CRC-32。详情请参阅 [dump.json 文件说明](#dumpjson-file-description)。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`dump_error_info.log`: Present only when the dump tool encountered an error "
"and records the failure log."
msgstr "`dump_error_info.log`：仅在采集工具遇到错误时生成，记录失败日志。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "`stack.json`: Call stacks for APIs/modules."
msgstr "`stack.json`：API/模块的调用栈信息。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`construct.json`: Hierarchical structure description. Empty when `level=L1`."
msgstr "`construct.json`：分层结构描述。`level=L1` 时为空。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "4. Analyze the results"
msgstr "4.分析结果"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "4.1 Prerequisites"
msgstr "4.1前提条件"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"You typically need two dump datasets: one from the \"problem side\" (the run"
" that exposes the accuracy or numerical error) and another from the "
"\"benchmark side\" (a good baseline). These datasets do not have to be "
"identical—they can come from different branches, framework versions, or even"
" alternative implementations (operator substitutions, different graph-"
"optimization switches, etc.). As long as they use the same or similar "
"inputs, hardware topology, and sampling points (step/token), `msprobe` can "
"compare them and locate the divergent nodes. If you cannot find a perfectly "
"clean benchmark, start by capturing the problem-side data, craft the "
"smallest reproducible case by hand, and perform a self-comparison. Below we "
"assume the problem dump is `problem_dump` and the benchmark dump is "
"`bench_dump`."
msgstr "通常需要两个采集数据集：一个来自“问题侧”（暴露精度或数值错误的运行），另一个来自“基准侧”（良好的基线）。这些数据集不必完全相同——它们可以来自不同的分支、框架版本，甚至不同的实现（算子替换、不同的图优化开关等）。只要它们使用相同或相似的输入、硬件拓扑和采样点（步数/token），`msprobe` 就能进行比较并定位差异节点。如果找不到完全干净的基准，可以先采集问题侧数据，手动构建最小可复现案例，然后进行自比较。下文中，我们假设问题采集目录为 `problem_dump`，基准采集目录为 `bench_dump`。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "4.2 Visualization"
msgstr "4.2 可视化"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Use `msprobe graph_visualize` to generate results that can be opened inside "
"`tb_graph_ascend`."
msgstr "使用 `msprobe graph_visualize` 生成可在 `tb_graph_ascend` 中打开的结果。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Ensure the dump contains `construct.json` (i.e., `level = L0` or `level = "
"mix`)."
msgstr "确保采集数据包含 `construct.json`（即 `level = L0` 或 `level = mix`）。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Prepare a comparison file such as `compare.json`. Its format and generation "
"flow are described in section 3.1.3 of `msprobe_visualization.md`. Example "
"(minimal runnable snippet):"
msgstr "准备对比文件（例如 `compare.json`）。其格式和生成流程在 `msprobe_visualization.md` 第 3.1.3 节中有描述。示例（最小可运行代码片段）："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Replace the paths with your dump directories before invoking `msprobe "
"graph_visualize`. **If you only need to build a single graph**, omit "
"`bench_path` to visualize one dump.   Multi-rank scenarios (single rank, "
"multi-rank, or multi-step multi-rank) are also supported. `npu_path` or "
"`bench_path` must contain folders named `rank+number`, and every rank folder"
" must contain a non-empty `construct.json` together with `dump.json` and "
"`stack.json`. If any `construct.json` is empty, verify that the dump level "
"includes `L0` or `mix`. When comparing graphs, both `npu_path` and "
"`bench_path` must contain the same set of rank folders so they can be paired"
" one-to-one."
msgstr "在调用 `msprobe graph_visualize` 之前，将路径替换为您的采集目录。**如果只需要构建单个图**，可省略 `bench_path` 以可视化单个采集数据。支持多 rank 场景（单 rank、多 rank 或多步多 rank）。`npu_path` 或 `bench_path` 必须包含名为 `rank+数字` 的文件夹，且每个 rank 文件夹必须包含非空的 `construct.json` 以及 `dump.json` 和 `stack.json`。如果任何 `construct.json` 为空，请确认采集级别包含 `L0` 或 `mix`。比较图形时，`npu_path` 和 `bench_path` 必须包含相同的一组 rank 文件夹，以便它们可以一对一配对。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "Run:"
msgstr "运行："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"After the comparison finishes, a `*.vis.db` file is created under "
"`graph_output`."
msgstr "比较完成后，将在 `graph_output` 下创建 `*.vis.db` 文件。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
#, python-brace-format
msgid "Graph build: `build_{timestamp}.vis.db`"
msgstr "图构建：`build_{timestamp}.vis.db`"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
#, python-brace-format
msgid "Graph comparison: `compare_{timestamp}.vis.db`"
msgstr "图比较：`compare_{timestamp}.vis.db`"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Launch `tensorboard` and load the output directory to inspect structural "
"differences, numerical comparisons, overflow detection results, cross-device"
" communication nodes, and filters/search. Pass the directory containing the "
"`.vis.db` files to `--logdir`:"
msgstr "启动 `tensorboard` 并加载输出目录，以检查结构差异、数值比较、溢出检测结果、跨设备通信节点以及过滤器/搜索功能。将包含 `.vis.db` 文件的目录传递给 `--logdir`："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Inspect the visualization. The UI usually displays the overall model "
"structure with operators, parameters, and tensor I/O. Click any node to "
"expand its children."
msgstr "检查可视化界面。UI 通常会显示整体模型结构，包括算子、参数和张量输入/输出。点击任意节点可展开其子节点。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"**Difference visualization**: Comparison results highlight divergent nodes "
"with different colors (the larger the difference, the redder the node). "
"Click a node to view its detailed information including tensor "
"inputs/outputs, parameters, and operator type. Analyze the data difference "
"and the surrounding connections to pinpoint the exact divergence."
msgstr "**差异可视化**：比较结果使用不同颜色突出显示差异节点（差异越大，节点越红）。点击节点可查看其详细信息，包括张量输入/输出、参数和算子类型。分析数据差异及其周围连接，以精确定位具体差异点。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "**Helper features**:"
msgstr "**辅助功能**："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Switch rank/step: Quickly check difference nodes on different ranks and "
"steps."
msgstr "切换 rank/step：快速检查不同 rank 和步数上的差异节点。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Search/filter: Use the search box to filter nodes by operator name, etc."
msgstr "搜索/过滤：使用搜索框按算子名称等过滤节点。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Manual mapping: Automatic mapping cannot cover every case, so the tool lets "
"you manually map nodes between the problem and benchmark graphs before "
"generating comparison results."
msgstr "手动映射：自动映射无法覆盖所有情况，因此该工具允许您在生成比较结果之前，手动映射问题和基准图中的节点。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "5. Troubleshooting"
msgstr "5.故障排除"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`RuntimeError: Please enforce eager mode`: Restart vLLM and add the "
"`--enforce-eager` flag."
msgstr "`RuntimeError: Please enforce eager mode`：重启 vLLM 并添加 `--enforce-eager` 标志。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"No dump files: Confirm that the JSON path is correct and every node has "
"write permission. In distributed scenarios set `keep_all_ranks` so that "
"every rank writes its own dump."
msgstr "无采集文件：确认 JSON 路径正确且每个节点都有写权限。在分布式场景中，设置 `keep_all_ranks` 以便每个 rank 写入自己的采集数据。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"Dumps are too large: Start with a `statistics` task to locate abnormal "
"tensors, then narrow the scope with `scope`/`list`/`tensor_list`, `filters`,"
" `token_range`, etc."
msgstr "采集数据过大：从 `statistics` 任务开始以定位异常张量，然后使用 `scope`/`list`/`tensor_list`、`filters`、`token_range` 等缩小范围。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "Appendix"
msgstr "附录"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "dump.json file description"
msgstr "dump.json 文件说明"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "L0 level"
msgstr "L0 级别"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"An L0 `dump.json` contains forward/backward I/O for modules together with "
"parameters and parameter gradients. Using PyTorch's `Conv2d` as an example, "
"the network code looks like:"
msgstr "L0 级别的 `dump.json` 包含模块的前向/反向输入输出以及参数和参数梯度。以 PyTorch 的 `Conv2d` 为例，网络代码如下："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`output = self.conv2(input)  # self.conv2 = torch.nn.Conv2d(64, 128, 5, "
"padding=2, bias=True)`"
msgstr "`output = self.conv2(input)  # self.conv2 = torch.nn.Conv2d(64, 128, 5, padding=2, bias=True)`"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "`dump.json` contains the following entries:"
msgstr "`dump.json` 包含以下条目："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`Module.conv2.Conv2d.forward.0`: Forward data of the module. `input_args` "
"represents positional inputs, `input_kwargs` represents keyword inputs, "
"`output` stores forward outputs, and `parameters` stores weights/biases."
msgstr "`Module.conv2.Conv2d.forward.0`：模块的前向数据。`input_args` 表示位置输入，`input_kwargs` 表示关键字输入，`output` 存储前向输出，`parameters` 存储权重/偏置。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`Module.conv2.Conv2d.parameters_grad`: Parameter gradients (weight and "
"bias)."
msgstr "`Module.conv2.Conv2d.parameters_grad`：参数梯度（权重和偏置）。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`Module.conv2.Conv2d.backward.0`: Backward data of the module. `input` "
"represents gradients that flow into the module (gradients of the forward "
"outputs) and `output` represents gradients that flow out (gradients of the "
"module inputs)."
msgstr "`Module.conv2.Conv2d.backward.0`：模块的反向数据。`input` 表示流入模块的梯度（前向输出的梯度），`output` 表示流出模块的梯度（模块输入的梯度）。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
#, python-brace-format
msgid ""
"**Note**: When the `model` parameter passed to the dump API is "
"`List[torch.nn.Module]` or `Tuple[torch.nn.Module]`, module-level names "
"include the index inside the list (`{Module}.{index}.*`). Example: "
"`Module.0.conv1.Conv2d.forward.0`."
msgstr "**注意**：当传递给采集 API 的 `model` 参数为 `List[torch.nn.Module]` 或 `Tuple[torch.nn.Module]` 时，模块级名称会包含其在列表中的索引（`{Module}.{index}.*`）。例如：`Module.0.conv1.Conv2d.forward.0`。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "L1 level"
msgstr "L1 级别"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"An L1 `dump.json` records forward/backward I/O for APIs. Using PyTorch's "
"`relu` function as an example (`output = torch.nn.functional.relu(input)`), "
"the file contains:"
msgstr "L1 级别的 `dump.json` 记录 API 的前向/反向输入输出。以 PyTorch 的 `relu` 函数为例（`output = torch.nn.functional.relu(input)`），文件包含："

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`Functional.relu.0.forward`: Forward data of the API. `input_args` are "
"positional inputs, `input_kwargs` are keyword inputs, and `output` stores "
"the forward outputs."
msgstr "`Functional.relu.0.forward`：API 的前向数据。`input_args` 是位置输入，`input_kwargs` 是关键字输入，`output` 存储前向输出。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"`Functional.relu.0.backward`: Backward data of the API. `input` represents "
"the gradients of the forward outputs, and `output` represents the gradients "
"that flow back to the forward inputs."
msgstr "`Functional.relu.0.backward`：API 的反向数据。`input` 表示前向输出的梯度，`output` 表示流回前向输入的梯度。"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid "mix level"
msgstr "mix 级别"

#: ../../source/developer_guide/performance_and_debug/msprobe_guide.md
msgid ""
"A `mix` dump.json contains both L0 and L1 level data; the file format is the"
" same as the examples above."
msgstr "`mix` 级别的 dump.json 同时包含 L0 和 L1 级别的数据；文件格式与上述示例相同。"